{% extends "layout.html" %}
{% load static %}

{% block css %}

<link rel="stylesheet" href="{% static 'css/table.css' %}" />

{% endblock %}
{% block content %}
<h1>Arquivos de Migração</h1>

<div class="main-content">

    <form method="get" class="form-filter">
        <div class="form-content">
            <div class="form">
                {{ filter.form.as_p }}
            </div>
            <button type="submit">Filtrar</button>
        </div>
    </form>

    <table>
        <thead>
            <tr>
              <th>Título da obra</th>
              <th>Gênero</th>
              <th>Ano lançamento</th>
              <th>Média de avaliações</th>
              <th>Número de avaliações</th>
            </tr>
        </thead>
        <tbody>
            {% for movie in movies %}
            <tr>
                <td><a href="#">{{ movie.title }}</a></td>
                <td>{{ movie.genres }}</td>
                <td>{{ movie.release_date }}</td>
                <td>{{ movie.average_rating }}</td>
                <td>{{ movie.rating_count }}</td>
            </tr>
        {% empty %}
            <tr>
                <td colspan="5">Nenhum filme encontrado.</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <div class="pagination">
        {% if is_paginated %}
            <span class="step-links">
                {% if page_obj.has_previous %}
                    <a href="?{% if filter.qs %}{{ filter.qs.urlencode }}&{% endif %}page={{ page_obj.previous_page_number }}">Anterior</a>
                {% endif %}

                <span class="current">
                    Página {{ page_obj.number }} de {{ page_obj.paginator.num_pages }}
                </span>

                {% if page_obj.has_next %}
                    <a href="?{% if filter.qs %}{{ filter.qs.urlencode }}&{% endif %}page={{ page_obj.next_page_number }}">Próxima</a>
                {% endif %}
            </span>
        {% endif %}
    </div>


</div>
{% endblock %}
